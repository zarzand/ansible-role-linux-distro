---

# Install common packages for a specific Linux distribution ansible_os_family
_linux_distro_prerequisites:
  default:
    - file
    - libcap
    - openssl
  AlmaLinux:
    - epel-release
    - yum-utils
    - nfs-utils
    - lsof
    - telnet
    - tmux
  Ubuntu:
    - nfs-common
    - lsof
    - telnet
    - tmux
  Arch Linux:
    - nfs-utils
    - lsof
    - telnet
    - tmux
    - cronie
linux_distro_prerequisites: "{{ _linux_distro_prerequisites[ansible_distribution] | default(_linux_distro_prerequisites['default']) }}"

_linux_distro_upgrade_update:
  dnf:
    - "state=latest name='*' update_cache=yes"
  yum:
    - "state=latest name='*' update_cache=yes"
  apt:
    - "update_cache=yes cache_valid_time=3600 upgrade=yes autoremove=yes"
  pacman:
    - "state=latest name='*' update_cache=yes cache_valid_time=3600 upgrade=yes autoremove=yes"
linux_distro_upgrade_update: "{{ _linux_distro_upgrade_update[ansible_pkg_mgr] }}"